AWFramework={DIRTY_MARKED:1,DIRTY_SELECTED:2,DIRTY_NEW_RECORDS:4,DIRTY_RECORDS_PER_PAGE:8,DIRTY_CURRENT_PAGE:16,DIRTY_CLEARED:32,isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},checkEnvironment:function(){var a=["small","med","large"];$el=$("<div>"),$el.appendTo($("body"));for(var b=a.length-1;b>=0;b--){var c=a[b];if($el.addClass("hide-on-"+c+"-only"),$el.is(":hidden"))return $el.remove(),c}}},AWFramework.BaseView=Backbone.View.extend({template:null,isRendered:!1,instantiateView:function(a,b,c){c=c?c:{},this.cacheView=c.cacheView,this.cacheView=!0,this.cachedHtml=null,this.viewsSack||(this.viewsSack=[]),this[a]=new b(c),this[a]._position=this.viewsSack.length,this.listenTo(this[a],"destroy",function(b){a&&this[a]&&(this.viewsSack.splice(this[a]._position,1),delete this[a])}.bind(this)),this.viewsSack.push(this[a])},events:{},noOp:function(){console.log("event block in child class")},initialize:function(a){a||(a={}),_.bindAll(this,"render","destroy");var b=this;this.render=_.wrap(this.render,function(a,c){return b._beforeRender(),a(c),b.afterRender(),b}),this.destroy=_.wrap(this.destroy,function(a,c,d,e){return b._beforeDestroy(),a(c,d,e),b})},renderView:function(a,b){var c=function(c){this.cacheView&&(this.cachedHtml=c),b=b?b:{},this.$el.html(_.template(c)(b)),this.render(),a&&a()}.bind(this);null!=this.template?this.cachedHtml?c(this.cachedHtml):$.ajax({url:this.template,method:"GET",success:c,error:function(a){this.$el.html("template ["+this.template+"] failed to load.")}.bind(this)}):(this.render(),a&&a())},render:function(){return this},afterRender:function(){this.isRendered=!0},_beforeRender:function(){},_beforeDestroy:function(){},destroy:function(){if(this.viewsSack)for(var a=this.viewsSack.length-1;a>=0;a--)this.viewsSack[a].destroy();this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this),this.trigger("destroy")}}),AWFramework.AbstractConstraintModel=Backbone.View.extend({intersection:function(){throw"ConstraintModel must implement intersection"},isEmpty:function(){throw"ConstraintModel must implement isEmpty"},setAttribute:function(a,b){throw"ConstraintModel must implement setAttribute"},setSort:function(a,b){throw"ConstraintModel must implement setSort"},setPageNumber:function(a){this.pageNumber=a+1},getPageNumber:function(){return this.pageNumber},setPageSize:function(a){this.pageSize=a},getPageSize:function(){return this.pageSize},getRecordOffset:function(){return(this.pageNumber-1)*this.pageSize+1}}),AWFramework.AbstractConstraintPanel=AWFramework.BaseView.extend({constraintModel:null,initialize:function(a){this.source=a.source,this.source.subscribe(this)},putConstraintModel:function(a){throw"putConstraintModel must be implemented"},getConstraintModel:function(){return this.constraintModel||(this.constraintModel=new this.source.ConstraintModelPrototype),this.constraintModel},onConstraintChange:function(){this.trigger("constraintPanel:changed",this)},render:function(){this.$el.html("Abstract Panel")},destroy:function(){this.source.unsubscribe(this),AWFramework.BaseView.prototype.destroy.call(this)}}),AWFramework.ProxyConstraintPanel=AWFramework.AbstractConstraintPanel.extend({initialize:function(a){this.from=a.from,AWFramework.AbstractConstraintPanel.prototype.initialize.call(this,a),this.listenTo(this.from,"source:constraintChange",this.onFromChange)},onFromChange:function(a){this.onConstraintChange()},getConstraintModel:function(){return this.from.constraintModel}}),AWFramework.AbstractRecordSelectionPanel=AWFramework.BaseView.extend({events:{"click #clear":"onClear","click #selectAll":"onSelectAll","click [id^='menu_']":"onMenuItem","click #indicator":"onIndicator","click #clearOnPage":"onClearOnPage","click #clearOnPageAll":"onClearOnPage"},onIndicator:function(){console.log("on indicator")},onClear:function(){this.parent.clearSelection()},onClearOnPage:function(){this.parent.clearPageSelection()},onSelectAll:function(){this.parent.selectAll()},menus:[],onMenuItem:function(a){var b=a.currentTarget.id.split("_"),c=this.menus[b[1]].entries[b[2]].callback;this.beforeCallback?this.beforeCallback(c,this.parent.markedRecordsMap):c(this.parent.markedRecordsMap),this.onClear()},selectedWord:"selected",update:function(){this.parent.source.getAll(null,function(a){var b=Object.keys(this.parent.markedRecordsMap).length;this.$("#indicator, #selectAll, #clear, #clearOnPage, #clearOnPageAll, #menu").hide(),b>0&&(this.$("#indicator, #menu").show(),this.$("#indicator").html(b+" "+this.selectedWord),this.$("#clear").show());for(var c=!0,d=!0,e=a.length-1;e>=0&&(d||c);e--){var f=this.parent.markedRecordsMap[a[e][this.parent.id]];f?d=!1:c=!1}d?this.$("#selectAll").show():d||c||this.$("#clearOnPage").show(),c&&this.$("#clearOnPageAll").show()}.bind(this))},initialize:function(a){this.options=a?a:{},this.parent=this.options.parent},render:function(){this.callbacks={};for(var a=0,b=this.menus.length;b>a;a++){var c=this.menus[a].id;"#"=="#test".substr(0,1)||(c="#"+c),this.callbacks[c]=this.menus[a].callback,this.$(c).on("click",function(a){var b="#"+$(a.currentTarget)[0].id;this.callbacks[b](this.parent.markedRecordsMap)}.bind(this))}}}),AWFramework.AbstractViewer=AWFramework.BaseView.extend({name:"abstractViewer",rowIdProperty:"uuid",events:{"change .aw-checkbox":"toggleCheckbox"},focus:function(){console.log("focus not implemented")},afterRecordSet:function(){},toggleCheckbox:function(a){a.originalEvent.preventDefault();var b=$(a.currentTarget),c=b.data("id"),d=b.prop("checked");if(d){var e={};e[this.parent.id]=c;var f=_.findWhere(this._records,e);this.markedRecordsMap[c]=f}else delete this.markedRecordsMap[c];return this.trigger("viewer:change"),!1},overlay:function(){this.$(".abstract-viewer-overlay").remove(),this.$el.append('<div class="abstract-viewer-overlay"></div>')},removeOverlay:function(){this.$(".abstract-viewer-overlay").remove()},onLoading:function(){this.overlay()},afterShow:function(a){this.dirty=!1},beforeShow:function(a){this._records=a},beforeSetRecord:function(a){},setRecord:function(){},initialize:function(a){a=a?a:{},AWFramework.BaseView.prototype.initialize.call(this,a),this.markedRecordsMap=a.markedRecordsMap,this.columns=a.columns,this.parent=a.parent,_.bindAll(this,"show","beforeShow","afterShow","setRecord","beforeSetRecord");var b=this;this.show=_.wrap(this.show,function(a,c){return b.beforeShow(c),a.call(b,c),b.afterShow(c),b}),this.setRecord=_.wrap(this.setRecord,function(a,c){return b.beforeSetRecord(c),a.call(b,c),b})},afterRender:function(){},show:function(a){this.renderView(null,{markedRecordsMap:this.markedRecordsMap,data:a})}}),$.fn.pagination=function(a,b){return b=$.extend({items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!1,next_show_always:!1,callback:function(){return!1}},b||{}),this.each(function(){function c(){return Math.ceil(a/b.items_per_page)}function d(){var a=Math.ceil(b.num_display_entries/2),d=c(),e=d-b.num_display_entries,f=g>a?Math.max(Math.min(g-a,e),0):0,h=g>a?Math.min(g+a,d):Math.min(b.num_display_entries,d);return[f,h]}function e(a,c){g=a,f();var d=b.callback(a,h);return d||(c.stopPropagation?c.stopPropagation():c.cancelBubble=!0),d}function f(){h.empty();var a=d(),f=c(),i=function(a){return function(b){return e(a,b)}},j=function(a,c){if(a=0>a?0:f>a?a:f-1,c=$.extend({text:a+1,classes:""},c||{}),a==g)var d=$("<li class='active'><a href='#'>"+c.text+"</a></li>");else var d=$("<li><a>"+c.text+"</a></li>").bind("click",i(a)).attr("href",b.link_to.replace(/__id__/,a));c.classes&&d.addClass(c.classes),h.append(d)};if(b.prev_text&&(g>0||b.prev_show_always)&&j(g-1,{text:b.prev_text,classes:"prev"}),a[0]>0&&b.num_edge_entries>0){for(var k=Math.min(b.num_edge_entries,a[0]),l=0;k>l;l++)j(l);b.num_edge_entries<a[0]&&b.ellipse_text&&$("<li class='disabled'><a href='#'>"+b.ellipse_text+"</a></li>").appendTo(h)}for(var l=a[0];l<a[1];l++)j(l);if(a[1]<f&&b.num_edge_entries>0){f-b.num_edge_entries>a[1]&&b.ellipse_text&&$("<li class='disabled'><a href='#'>"+b.ellipse_text+"</a></li>").appendTo(h);for(var m=Math.max(f-b.num_edge_entries,a[1]),l=m;f>l;l++)j(l)}b.next_text&&(f-1>g||b.next_show_always)&&j(g+1,{text:b.next_text,classes:"next"})}var g=b.current_page;a=!a||0>a?1:a,b.items_per_page=!b.items_per_page||b.items_per_page<0?1:b.items_per_page;var h=$(this);this.selectPage=function(a){e(a)},this.prevPage=function(){return g>0?(e(g-1),!0):!1},this.nextPage=function(){return g<c()-1?(e(g+1),!0):!1},f(),b.callback(g,this)})},AWFramework.PaginationPanel=AWFramework.AbstractConstraintPanel.extend({DEFAULT_ITEMS_PER_PAGE_LIST:[10,20,30,50,100,1e3],DEFAULT_ITEMS_PER_PAGE:10,respositoryName:null,events:{"click [id^='pageSize_']":"onPageSize","click #nextPage":"onNextPage","click #previousPage":"onPreviousPage"},onPageSize:function(a){var b=a.currentTarget.id.split("_")[1];this.setPageSize(b),this.onConstraintChange()},setPageSize:function(a){this.$("#itemsPerPage").html(a),this.pagerOptions.current_page=0,this.pagerOptions.items_per_page=Number(a),this.$("#paginationPanel").pagination(this.source.getCount(),this.pagerOptions)},reset:function(){this.pagerOptions.current_page=0,this.$("#paginationPanel").pagination(this.source.getCount(),this.pagerOptions)},goToPage:function(a,b){this.pagerOptions.current_page!=a&&(this.pagerOptions.current_page=a,this.onConstraintChange())},getConstraintModel:function(){return this.constraintModel=new this.source.ConstraintModelPrototype,this.constraintModel.setPageSize(this.pagerOptions.items_per_page),this.constraintModel.setPageNumber(this.pagerOptions.current_page),this.constraintModel},initialize:function(a){AWFramework.AbstractConstraintPanel.prototype.initialize.call(this,a),this.options=a?a:{},this.items_per_page=a.items_per_page,this.items_per_page_list=a.items_per_page_list,this.items_per_page_list||(this.items_per_page_list=this.DEFAULT_ITEMS_PER_PAGE_LIST),this.items_per_page||(this.items_per_page=this.DEFAULT_ITEMS_PER_PAGE),this.pagerOptions={callback:this.goToPage.bind(this),current_page:0,prev_text:"",next_text:"",items_per_page:this.items_per_page,num_display_entries:4,num_edge_entries:1},this.listenTo(this.source,"source:constraintChange",this.update),this.listenTo(this.source,"source:refresh",this.update)},makeDropDownListMenu:function(){var a=this.$("#itemsPerPageMenu");a.empty();for(var b=0,c=this.items_per_page_list.length;c>b;b++){var d=this.items_per_page_list[b],e=$('<li><a id="pageSize_'+d+'" role="menuitem">'+d+"</a></li>");a.append(e)}this.$("#itemsPerPage").html(this.items_per_page)},onNextPage:function(){this.goToPage(this.pagerOptions.current_page+1)},onPreviousPage:function(){this.goToPage(this.pagerOptions.current_page-1)},update:function(a){this.source.getAll(null,function(){this.$("#previousPage,#nextPage").show();var a=this.pagerOptions.current_page;0==a&&this.$("#previousPage").hide();var b=Number(this.pagerOptions.items_per_page),c=this.source.getCount(),d=(a+1)*b;d=d>c?c:d;var e=1+a*b;e=e>c?c:e,d==c&&this.$("#nextPage").hide();var f=e+"-"+d+" OF "+c;if(this.respositoryName){var g=" IN "+this.respositoryName;f+=g}this.$("#paginationPanel").pagination(this.source.getCount(),this.pagerOptions),this.$("#paginationCount").html(f),0==c?this.$("#paginationCount").hide():this.$("#paginationCount").show()}.bind(this))},render:function(){if(!this.template){var a=_.template(this.html);$(this.el).html(a)}this.makeDropDownListMenu()}}),AWFramework.RestSource=Backbone.View.extend({dataType:"json",constraintType:"POST",ConstraintModelPrototype:window.AbstractConstraintModel,initialize:function(){this.constraintPanels={},this.callbackQueues={},this.cache={},this.preParseCache={},this.noCache=!1},subscribe:function(a){this.constraintPanels[a.cid]=a,this.listenTo(a,"constraintPanel:changed",this.onConstraintPanelChanged)},unsubscribe:function(a){delete this.constraintPanels[a.cid]},putConstraintModel:function(a){this.constraintModel=a;for(var b in this.constraintPanels){var c=this.constraintPanels[b];c.putConstraintModel(this.constraintModel)}},onConstraintPanelChanged:function(a){var b=!(a instanceof AWFramework.PaginationPanel),c=new this.ConstraintModelPrototype;for(var d in this.constraintPanels){var e=this.constraintPanels[d];b&&e instanceof AWFramework.PaginationPanel&&e.reset(),c=c.intersection(e.getConstraintModel())}this.setContstraints(c,a)},getCount:function(){throw"in order to use pagination, must implement getCount() in RestSource."},arrayStructure:{root:"/array",auxA:"/array/{%id%}/auxA","auxA->data":"/array/{%id%}/auxA/data"},rootStructure:{root:"/records",auxA:"/records/{%id%}/auxA",auxB:"/records/{%id%}/auxB","auxA->data":"/records/{%id%}/auxA/data","array[arrayStructure]":"/records/{%id%}/array"},clearCache:function(){this.cache={}},setContstraints:function(a,b){this.setConstraintModel(a),this.trigger("source:constraintChange",b)},setConstraintModel:function(a){this.constraintModel=a,"POST"==this.constraintType?this.payload=JSON.stringify(a.attributes):this.constraintUrl=this.constraintModel.getUrl()},getAll:function(a,b,c,d,e,f,g,h,i){var j="";this.constraintModel&&"GET"==this.constraintType&&(j="?"+this.constraintModel.getUrl());var k=this._getUrl(a,d,e,f,g,h,i)+j;if(null==this.cache[k]||this._lastPayload!=this.payload){if(this._loading)return this.callbackQueues[k]||(this.callbackQueues[k]=[]),void this.callbackQueues[k].push(b);this._loading=!0,this.callbackQueues[k]=[],this.callbackQueues[k].push(b),this._xhr=$.ajax({headers:{Accept:"application/json"},cache:!1,contentType:"application/json",type:this.constraintType,processData:!1,url:k,dataType:this.dataType,data:this.payload,success:function(b){this.noCache||(this.preParseCache[k]=b),this.setCount&&this.setCount(b),this["parse__"+a]?this["parse__"+a](b):this.parse&&(b=this.parse(b));var c=function(a){this._lastPayload=this.payload,this.noCache||(this.cache[k]=a);for(var b=0,c=this.callbackQueues[k].length;c>b;b++)this.callbackQueues[k][b](a);this._loading=!1}.bind(this);this["parseAsync__"+a]?this["parse__"+a](b):this.parseAsync?this.parseAsync(b,function(a){c(a)}.bind(this)):c(b)}.bind(this),error:function(a){this._loading=!1,c?c(a):(console.log("error:"),console.log(a))}.bind(this)})}else this.setCount&&this.setCount(this.preParseCache[k]),b(this.cache[k])},destroy:function(){console.log("destroying source")},deleteAll:function(a,b){},deepDelete:function(a,b){},refresh:function(a,b,c,d,e,f,g){var h=this._getUrl(a,b,c,d,e,f,g);delete this.cache[h],this.trigger("source:refresh")},_getUrl:function(a,b,c,d,e,f,g){var h="";if(!a||""==a)return h=this.rootStructure.root;if(this.rootStructure[a]){var i=this.rootStructure[a];return b&&(i=i.replace("{%id%}",b)),c&&(i=i.replace("{%id1%}",c)),i}return h}}),AWFramework.SourceView=AWFramework.BaseView.extend({el:"#sourceView",viewSelectionPanelEl:"#viewSelectionPanelEl",recordSelectionPanelEl:null,viewers:[AWFramework.AbstractViewer],recordSelectionPanelPrototype:AWFramework.AbstractRecordSelectionPanel,viewSelectionPanelPrototype:AWFramework.ViewSelectionPanel,id:"uuid",initialView:"undefined",checkedRecords:{},columns:null,initialize:function(a){var a=a?a:{};this.markedRecordsMap={},AWFramework.BaseView.prototype.initialize.call(this,a),a.initialView&&(this.initialView=a.initialView),this.columns=a.columns,this.source=a.source,this.clearOnConstraintChange=a.clearOnConstraintChange,this.recordSelectionPanel=new this.recordSelectionPanelPrototype({parent:this}),this.viewSelectionPanel=new this.viewSelectionPanelPrototype({viewers:this.viewers,initialView:this.initialView}),this.source&&(this.listenTo(this.source,"source:constraintChange",this.onConstraintChange),this.listenTo(this.source,"source:refresh",this.onConstraintChange)),this.listenTo(this.viewSelectionPanel,"viewSelectionPanel:change",this.handleChangeView);for(var b=this.viewers.length-1;b>=0;b--)this.instantiateView(this.viewers[b].prototype.name,this.viewers[b],{markedRecordsMap:this.markedRecordsMap,columns:this.columns,parent:this}),this.listenTo(this[this.viewers[b].prototype.name],"viewer:change",this.handleViewerChange),this.listenTo(this[this.viewers[b].prototype.name],"viewer:setRecord",this.handleViewerSetRecord);if(!this[this.initialView]&&this.viewers.length>0){if(this.initialView)throw"unresolved initialView: "+this.initialView;var c="window.YourView = SourceView.extend({ initialView : 'grid' }) // where 'grid' resolves to GridViewer.prototype.name";throw"initial view must be either passed in the viewer or defined in the extended view i.e: "+c}},handleViewerSetRecord:function(a){this.currentId=a,this.trigger("viewer:setRecord",a)},currentId:null,setColumns:function(a){this.columns=a,this.onConstraintChange()},selectAll:function(){this.source.getAll(null,function(a){for(var b=a.length-1;b>=0;b--)this.markedRecordsMap[a[b][this.id]]=a[b];this.handleViewerChange(),this.viewer&&this.viewer.show(a),this.trigger("selectionChanged")}.bind(this))},clearSelection:function(){for(var a in this.markedRecordsMap)delete this.markedRecordsMap[a];this.trigger("selectionChanged"),this._refresh()},_refresh:function(){this.handleViewerChange(),this.source&&this.source.getAll(null,function(a){this.viewer&&this.viewer.show(a)}.bind(this))},clearPageSelection:function(){this.source.getAll(null,function(a){for(var b=a.length-1;b>=0;b--)delete this.markedRecordsMap[a[b][this.id]];this.handleViewerChange(),this.viewer.show(a)}.bind(this))},onConstraintChange:function(){this._disabled||(this.clearOnConstraintChange&&this.clearSelection(),this.viewer&&(this.viewer.onLoading(),this.$("#viewerProgressBar").show(),this.source.getAll(null,function(a){this.$("#viewerProgressBar").hide(),this.recordSelectionPanel.update(),this.viewer.show(a),this.setDirtyForAllButCurrent()}.bind(this))))},render:function(){var a=$('<div id="viewer_holder" style="position: relative; height: 100%;width:100%;overflow-x: hidden;overflow-y: hidden; display: block;">');this.$el.empty(),this.$el.append('<div id="viewerProgressBar" class="progress" style="display:none;margin-bottom: -6px;margin-top: 2px;"><div class="indeterminate"></div></div>'),this.$el.append(a);for(var b=this.viewers.length-1;b>=0;b--){var c=$('<div id="'+this.viewers[b].prototype.name+'" class="record_viewer"></div>');a.append(c),this[this.viewers[b].prototype.name].setElement(c).renderView()}this.viewSelectionPanel.setElement(this.viewSelectionPanelEl).render();var d=this.recordSelectionPanelEl;d||(d=$('<div id="viewerRecordSelectionPanelEl">'),this.$el.prepend(d)),this.recordSelectionPanel.setElement(d).renderView(),this.handleChangeView(this.initialView),this.pressed={},$(document).on("keydown",function(a){a=a||window.event,this.pressed[a.keyCode]=!0}.bind(this)),$(document).on("keyup",function(a){a=a||window.event,delete this.pressed[a.keyCode]}.bind(this))},handleViewerChange:function(){this.recordSelectionPanel.update(),this.setDirtyForAllButCurrent()},handleChangeView:function(a){this.setViewer(a),this.viewer&&this.viewer.focus()},setDirtyForAllButCurrent:function(){for(var a=this.viewers.length-1;a>=0;a--)this.viewer!=this[this.viewers[a].prototype.name]&&(this[this.viewers[a].prototype.name].dirty=!0)},setViewer:function(a){this.viewer=this[a];for(var b=this.viewers.length-1;b>=0;b--)this.$("#"+this.viewers[b].prototype.name).hide();this.$("div#"+a).show(),this.viewer&&this.viewer.dirty&&this.source.getAll(null,function(a){this.viewer.show(a)}.bind(this))}}),AWFramework.ViewSelectionPanel=AWFramework.BaseView.extend({initialize:function(a){this.groups={},this.viewers=a.viewers,this.initialView=a.initialView,this.currentViewer=this.initialView},events:function(){for(var a=[],b=this.viewers.length-1;b>=0;b--)a["click #"+this.viewers[b].prototype.name]="triggerChangeView";return a},setByName:function(a){this.$el.find("li").removeClass("active");var b=this.$("#"+this.currentViewer),c=this.$("#"+a);b.hasClass("group-a3")&&!c.hasClass("group-a3")&&b.addClass("inactive"),c.addClass("active"),this.previousViewer=this.currentViewer,this.currentViewer=a,this.trigger("viewSelectionPanel:change",a)},triggerChangeView:function(a){var b=a.currentTarget.id,c=this.$("#"+this.currentViewer),d=this.$("#"+b);if(b==this.currentViewer&&d.data("group")&&c.data("group")&&d.data("group")==c.data("group"))for(var e=0,f=this.groups[d.data("group")],e=0,g=f.length;g>e;e++)if(f[e]==b){var h=f.length-1>e?f[e+1]:f[0];return void this.$("#"+h).click()}if(b!=this.currentViewer){var i=this.$el.find("li");i.removeClass("active"),c.removeClass("inactive"),$(a.currentTarget).addClass("active"),c.hasClass("group-a3")&&!d.hasClass("group-a3")&&c.addClass("inactive"),this.previousViewer=this.currentViewer,this.currentViewer=b,this.trigger("viewSelectionPanel:change",b)}},setPrevious:function(){this.$("#"+this.previousViewer).click()},render:function(){this.$el.empty();for(var a='<ul class="nav nav-tabs">',b=this.viewers.length-1;b>=0;b--){var c=this.viewers[b].prototype.group,d="",e="";c&&(e=' data-group="'+c+'" ',d="group-"+c,this.groups[c]||(this.groups[c]=[]),this.groups[c].push(this.viewers[b].prototype.name));var f=this.viewers[b].prototype.name==this.initialView?"active":"",g="";g=this.viewers[b].prototype.icon?'<a><i class="'+this.viewers[b].prototype.icon+'"></i></a>':this.viewers[b].prototype.indicator?this.viewers[b].prototype.indicator:this.viewers[b].prototype.name,a+="<li "+e+' class="'+f+" "+d+'" id="'+this.viewers[b].prototype.name+'">'+g+"</li>"}return a+="</ul>",this.$el.html(a),this.$("#"+this.initialView).hasClass("group-a3")||$(this.$(".group-a3")[0]).addClass("inactive"),this}});